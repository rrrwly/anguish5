<script>
// One-pass marquee: scrolls once, then stops neatly with all names visible
function onePassMarquee() {
  const container = document.querySelector('.marquee-container');
  const track = document.getElementById('track');
  const textEl = document.getElementById('namesText');

  // slightly narrower starting width for better proportion
  container.style.width = '28%';
  container.style.overflow = 'hidden';
  container.style.textAlign = 'center';

  requestAnimationFrame(() => {
    const cW = container.clientWidth;
    const tW = textEl.offsetWidth;

    let x = cW;
    const speed = 80; // px per second
    let last = performance.now();
    let running = true;

    function step(ts) {
      if (!running) return;
      const dt = (ts - last) / 1000;
      last = ts;
      x -= speed * dt;

      // when finished scrolling
      if (x <= 0) {
        x = 0;
        track.style.transform = `translateX(${x}px)`;
        running = false;

        // adjust final width (a little narrower than before)
        const maxWidth = Math.floor(window.innerWidth * 0.7);
        const finalWidth = Math.min(tW * 0.85, maxWidth);
        container.style.width = finalWidth + 'px';
        container.style.overflow = 'visible';
        return;
      }

      track.style.transform = `translateX(${x}px)`;
      requestAnimationFrame(step);
    }

    track.style.transform = `translateX(${x}px)`;
    requestAnimationFrame(step);
  });
}
</script>
